import TransactionCard from "@/components/ui/TransactionCard";
import React, { useState } from "react";
import {
  ActivityIndicator,
  ScrollView,
  StyleSheet,
  Text,
  TextInput,
  View,
  TouchableOpacity,
} from "react-native";
import { ISmsMessage } from "@/utils/sms";
import { useSms } from "@/hooks/useSms";
import { useAppSelector } from "@/store";

// const messages: ISmsMessage[] = [
//   {
//     _id: 63,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900308724,
//     date_sent: 1758903909000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhCkmR/O78BHup82WlZ7DqdI",
//     body: "Your credit card ending with#7617 was charged for EGP 15.95 at Uber on 25/09/25  at 22:19. Card available limit is EGP  234247.63. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 62,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900308521,
//     date_sent: 1758903908000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhC5Kvz7kz1E1IwKNqccdPtY",
//     body: "يرجى العلم انه تم تنفيذ تحويل لحظي بمبلغ 3145.00 جم من حسابك المنتهي بـ ****2224 برقم مرجعي c4a36142 بتاريخ 25-09-2025 20:23 للمزيد، برجاء الاتصال بـ 19666",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 61,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900308160,
//     date_sent: 1758903907000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhDv70OmCKpBBqamVMFFbrOy",
//     body: "Your credit card ending with#7617 using Apple Pay was charged for EGP 273.01 at GEIDEA STACKD on 25/09/25  at 18:41. Card available limit is EGP  234263.58. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 60,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900307935,
//     date_sent: 1758903907000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhBS6sZMS/9KWY/4LQxdGR/D",
//     body: "يرجى العلم انه تم تنفيذ تحويل لحظي بمبلغ 1000.00 جم إلى حسابك المنتهي بـ ****2224 من NAHED MOHAMED MOSTAFA A برقم مرجعي 818acb53 بتاريخ 24-09-2025 23:36 للمزيد، برجاء الاتصال بـ 19666",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 59,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900307640,
//     date_sent: 1758903906000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhCdiqelEWFHRZjGjnLBvtXc",
//     body: "Your credit card ending with#7617 using Apple Pay was charged for EGP 285.00 at TAIYAKI - CITY on 24/09/25  at 21:00. Card available limit is EGP  234536.59. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 58,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900307347,
//     date_sent: 1758903906000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhBHzZUFcNtKZKnHMTFFcYoM",
//     body: "عميل CIB العزيز، برجاء العلم أنه اعتبارًا من 25 سبتمبر ٢٠٢٥، سنقوم بتحديث أسعار العائد على الودائع بالجنيه المصري. لمعرفة المزيد، برجاء الضغط هنا: https://cib.eg/69fa14. تُطبق الشروط والأحكام. رقم التسجيل الضريبي: ٩٤٩-٨٩١-٢٠٤",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 57,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900306875,
//     date_sent: 1758903905000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhCJnI1GLk5P0K5U+W+8fLwU",
//     body: "لفترة محدودة يمكنك تقسيط 39000 جم من مستحقات بطاقتك الائتمانية المنتهية ب 7617 على 6 أشهر بقسط شهري 7219.2 جم. للتقسيط، أرسل قسط إلى 4435.  العرض ساري حتى 02/10/2025.  تطبق الشروط والأحكام. رقم ت.ض: ٩٤٩ - ٨٩١ – ٢٠٤",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 56,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900306586,
//     date_sent: 1758903904000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhCkfs2N6glNfYQJsUxpFH/V",
//     body: "عيش تجربة مميزة مع CIB Wealth في نادي Palm Hills الرياضي! احصل علي خصم حصري ١٠٪ على العضوية مدى الحياة، بمقدم ٥٪ فقط عند الدفع ببطاقات CIB وتقسيط بدون فوائد حتى ٦ سنوات لفرع ٦ أكتوبر و٥ سنوات لفرع القاهرة الجديدة (شامل ضريبة القيمة المضافة ١٤٪). يبدأ القسط الأول بعد ٣ أشهر من تاريخ التعاقد. هذا العرض ساري حتى نهاية شهر أكتوبر ٢٠٢٥. للمزيد من المعلومات، يرجى زيارة: https://cib.eg/dfs9. ولمزيد من التفاصيل، اتصل بنادي Palm Hills على ٠١٢٢٦٤٤٣٨٧٤ لفرع ٦ أكتوبر و ٠١٠٠٥٥٦٩١٦٦ لفرع القاهرة الجديد أو تواصل مع مدير علاقات CIB Wealth الخاص بك. تُطبق الشروط والأحكام. رقم التسجيل الضريبي: ٩٤٩-٨٩١-٢٠٤",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 55,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900306181,
//     date_sent: 1758903904000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhA/BG55BsdGzrZP1rRgVndr",
//     body: "Your credit card ending with#7617 using Apple Pay was charged for EGP 220.90 at Talabat on 23/09/25  at 15:51. Card available limit is EGP  234825.48. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 54,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900305848,
//     date_sent: 1758903903000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhBxW1bj3gRAnIyTCdhXCiqs",
//     body: "Your credit card #7617 was charged for EGP 129.99 at APPLE.COM BILL on 23/09/25  at 13:10. Available limit is  235046.38 and the available international limit to use is EGP 203703",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 53,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900305499,
//     date_sent: 1758903903000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhCa8txB7uZMxbBUGAKx4Mym",
//     body: "Your credit card ending with#7617 was charged for EGP .49 at Talabat on 22/09/25  at 16:05. Card available limit is EGP  235176.37. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 52,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900305075,
//     date_sent: 1758903902000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhA5VqN1ojtK+Zw5yN5gr9h/",
//     body: "يرجى العلم انه تم تنفيذ تحويل لحظي بمبلغ 1900.00 جم من حسابك المنتهي بـ ****2224 برقم مرجعي 8181fd3c بتاريخ 22-09-2025 15:52 للمزيد، برجاء الاتصال بـ 19666",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 51,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900304742,
//     date_sent: 1758903901000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhAyPkHRrAhAK76WqmqV/Zp9",
//     body: "يرجى العلم انه تم تنفيذ تحويل لحظي بمبلغ 1000.00 جم من حسابك المنتهي بـ ****2224 برقم مرجعي 54e17452 بتاريخ 21-09-2025 23:10 للمزيد، برجاء الاتصال بـ 19666",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 50,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900304078,
//     date_sent: 1758903901000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhA1pN19CI5N+rvk3iYxboJm",
//     body: "Your credit card ending with#7617 using Apple Pay was charged for EGP 690.00 at CHILL OUT - GAR on 21/09/25  at 20:16. Card available limit is EGP  235176.86. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 49,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900303179,
//     date_sent: 1758903900000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhAAakNLIQdD4INL+lLCrpN+",
//     body: "Your credit card ending with#7617 using Apple Pay was charged for EGP 370.00 at GEIDEA STACKD on 21/09/25  at 17:53. Card available limit is EGP  235866.86. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 48,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900302659,
//     date_sent: 1758903899000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhAPjyL22+5Pi7DETSXP/9V0",
//     body: "Your credit card ending with#7617 using Apple Pay was charged for EGP 5850.27 at FAWRY MANTRA on 21/09/25  at 14:48. Card available limit is EGP  236236.86. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 47,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900301677,
//     date_sent: 1758903899000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhA93CDJgnpLzIzGTxczhqw6",
//     body: "تم سحب مبلغ  EGP 200.00  من بطاقة الخصم المباشر المنتهية بـ **5514 من   FIBE HO M11300 في 20/09/25 17:01 ، الرصيد المتاح EGP 24792.73",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 46,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900300688,
//     date_sent: 1758903898000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhDqiTeYjP5EdI4eog+qpFax",
//     body: "يرجى العلم انه تم تنفيذ تحويل لحظي بمبلغ 4820.00 جم إلى حسابك المنتهي بـ ****2224 من على صبرى على يونس برقم مرجعي cf273ce9 بتاريخ 20-09-2025 16:36 للمزيد، برجاء الاتصال بـ 19666",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 45,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900300023,
//     date_sent: 1758903898000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhD7JjRAYDFLzq+CHQVUHf7u",
//     body: "Your credit card ending with#7617 using Apple Pay was charged for EGP 200.00 at HAMMER - CITY S on 18/09/25  at 21:49. Card available limit is EGP  242096.43. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 44,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900299436,
//     date_sent: 1758903897000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhCPpFfQG6xOUqmFXA5QKFkY",
//     body: "اكسب هدية عند ترشيح أصدقائك أو أحد أفراد عائلتك للانضمام إلى عالم CIB Wealth! وعند انضمامه، يمكن أن تحصل على ١٬٠٠٠٬٠٠٠ نقطة BONUS بما يعادل ٥,٠٠٠ جم عند تحقيقهم الشروط المطلوبة لفتح حساب CIB Wealth. هذا العرض ساري لفترة محدودة. ولمزيد من المعلومات، برجاء الضغط هنا: https://cib.eg/zcz9 أو تواصل مع مدير علاقات CIB Wealth الخاص بك. تُطبق الشروط والأحكام. رقم التسجيل الضريبي: ٩٤٩ - ٨٩١ – ٢٠٤",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 43,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900298943,
//     date_sent: 1758903896000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhCV6gdyiq5L1aj1cx3RrB4x",
//     body: "Your credit card ending with#7617 using Apple Pay was charged for EGP 608.00 at DECATHLON EGYPT on 18/09/25  at 20:03. Card available limit is EGP  242296.43. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 42,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900298032,
//     date_sent: 1758903896000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhCjKhQmd1xEX5KLIM1Ie3ua",
//     body: "Your credit card ending with#7617 was charged for EGP 73.93 at myfawry on 18/09/25  at 16:41. Card available limit is EGP  242904.43. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 41,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900297297,
//     date_sent: 1758903895000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhCZYqEeLkZAUbYmOINRLRz5",
//     body: "Your credit card #7617 was charged for EGP 210.00 at CANVA I04643-3 on 18/09/25  at 16:11. Available limit is  242978.36 and the available international limit to use is EGP 203703",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 40,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900296781,
//     date_sent: 1758903894000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhATu88Uh6tIjK044kvvi1fn",
//     body: "يرجى العلم انه تم تنفيذ تحويل لحظي بمبلغ 300.00 جم إلى حسابك المنتهي بـ ****2224 من على صبرى على يونس برقم مرجعي 74e0ba3f بتاريخ 18-09-2025 13:59 للمزيد، برجاء الاتصال بـ 19666",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 39,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900295945,
//     date_sent: 1758903894000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhAAaRZ8kQBGRrKJRTv1LmPC",
//     body: "أحصل على الـ iPhone 17 قبل أي حد! تقسيط حتى 36 شهر بدون فوائد باستخدام بطاقتك الائتمانية من CIB ابتداًء من 19 سبتمبر 2025. لمعرفة التفاصيل عن خطط التقسيط والتجار المشاركين، اضغط https://cib.eg/31df6a . تطبق الشروط والأحكام. رقم ت. ض.: 949- 891- 204",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 38,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900295005,
//     date_sent: 1758903893000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhBuNZcR2B1FGZoTtkCfbpM1",
//     body: "Your credit card #7617 was charged for EGP 100.00 at Netflix.com on 18/09/25  at 06:56. Available limit is  243188.36 and the available international limit to use is EGP 203913",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 37,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900294323,
//     date_sent: 1758903893000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhAoo9KNGbNI5pz2tRT497Xx",
//     body: "Your credit card ending with#7617 was charged for EGP 39.66 at Talabat on 18/09/25  at 00:49. Card available limit is EGP  243289.18. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 36,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900293863,
//     date_sent: 1758903892000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhANiE+UnINKc4zthdojCcCl",
//     body: "تم سحب مبلغ  EGP 600.00  من بطاقة الخصم المباشر المنتهية بـ **5514 من   FIBE HO M11300 في 17/09/25 17:45 ، الرصيد المتاح EGP 621.73",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 35,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900292952,
//     date_sent: 1758903891000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhARuQt031ZEM4GmjSpuckc5",
//     body: "عميلنا العزيز، يرجى العلم أن البنك سوف يقوم بتحديث خدمة الإنترنت البنكية وتطبيق CIB Mobile Banking مما سيترتب عليه عدم إتاحة تلك الخدمات بشكل مؤقت في يوم الجمعة الموافق 19 سبتمبر 2025 من الساعة 12 صباحًا وحتى الساعة 7:30 صباحًا بتوقيت القاهرة. نأسف على الإزعاج. تطبق الشروط والأحكام. ",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 34,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900291858,
//     date_sent: 1758903891000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhDeEFR09x1DDrwPbDN5F9xD",
//     body: "يرجى العلم انه تم تنفيذ تحويل لحظي بمبلغ 650.00 جم من حسابك المنتهي بـ ****2224 برقم مرجعي 7bd8c8d9 بتاريخ 17-09-2025 17:42 للمزيد، برجاء الاتصال بـ 19666",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 33,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900291256,
//     date_sent: 1758903890000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhBzTEctXAFAt7eVUiO9Pc6F",
//     body: "أحصل على الـ iPhone 17 قبل أي حد! تقسيط حتى 36 شهر بدون فوائد باستخدام بطاقتك الائتمانية من CIB ابتداًء من 19 سبتمبر 2025. لمعرفة التفاصيل عن خطط التقسيط والتجار المشاركين، اضغط https://cib.eg/31df6a . تطبق الشروط والأحكام. رقم ت. ض.: 949- 891- 204",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 32,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900290847,
//     date_sent: 1758903889000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhAEDhPM+79AqqtZwn7io6uK",
//     body: "Your credit card ending with#7617 was charged for EGP 182.07 at Uber on 17/09/25  at 10:15. Card available limit is EGP  243328.84. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 31,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900290313,
//     date_sent: 1758903889000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhDvU1fj+wxIFIaHAmWe/BnF",
//     body: "Your credit card #7617 was charged for USD 20.00 at CLAUDE.AI SUBSC on 17/09/25  at 00:24. Available limit is  243510.91 and the available international limit to use is EGP 203703",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 30,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900289895,
//     date_sent: 1758903888000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhACrGZRJH1Au5WCbwU/rNfP",
//     body: "يرجى العلم انه تم تنفيذ تحويل لحظي بمبلغ 400.00 جم إلى حسابك المنتهي بـ ****2224 من NAHED MOHAMED MOSTAFA A برقم مرجعي c5e7804d بتاريخ 16-09-2025 22:51 للمزيد، برجاء الاتصال بـ 19666",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 29,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900289346,
//     date_sent: 1758903887000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhA1CRz7heNGlruqw1pfpQKG",
//     body: "يرجى العلم انه تم تنفيذ تحويل لحظي بمبلغ 300.00 جم إلى حسابك المنتهي بـ ****2224 من NAHED MOHAMED MOSTAFA A برقم مرجعي b93109c4 بتاريخ 16-09-2025 22:34 للمزيد، برجاء الاتصال بـ 19666",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 28,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900288175,
//     date_sent: 1758903887000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhAMFWPCf/lMWKmvZSRzQKPX",
//     body: "تم سحب مبلغ  EGP 1000.00  من بطاقة الخصم المباشر المنتهية بـ **5514 من          ALXB في 16/09/25 22:13 ، الرصيد المتاح EGP 1177.38",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 27,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900287463,
//     date_sent: 1758903886000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhDhf+Zcw3lPVJZuhMB9xLe7",
//     body: "Your credit card ending with#7617 using Apple Pay was charged for EGP 240.00 at PAYMOB- Coffee on 16/09/25  at 22:11. Card available limit is EGP  244502.80. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 26,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900286847,
//     date_sent: 1758903885000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhC5OmnK7H5KGIz+kuhQKRpw",
//     body: "Your credit card ending with#7617 was charged for EGP 3.83 at Uber on 16/09/25  at 18:27. Card available limit is EGP  244742.80. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 25,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900285882,
//     date_sent: 1758903885000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhDYdiBSLIBP5JndAz2c3ICz",
//     body: "يرجى العلم انه تم تنفيذ تحويل لحظي بمبلغ 300.00 جم من حسابك المنتهي بـ ****2224 برقم مرجعي ada614d4 بتاريخ 16-09-2025 16:18 للمزيد، برجاء الاتصال بـ 19666",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 24,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900285122,
//     date_sent: 1758903884000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhBcFn/h+XlPbrWpQKheGkhK",
//     body: "يرجى العلم انه تم تنفيذ تحويل لحظي بمبلغ 9610.00 جم من حسابك المنتهي بـ ****2224 برقم مرجعي ea92939a بتاريخ 16-09-2025 15:15 للمزيد، برجاء الاتصال بـ 19666",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 23,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900284294,
//     date_sent: 1758903883000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhBdXeLUkqFHu5xIU0nrLoqz",
//     body: "كشف حساب شهر سبتمبر 2025  لبطاقتك الائتمانية المنتهية بـ 7617 هو 26022.61 جم ، الحد الأدنى للسداد قبل  05/10 هو 4570.73 جم .يمكنك الاطلاع على تفاصيل كشف الحساب من خلال الرابط التالي: https://cib.eg/hk9",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 22,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900283392,
//     date_sent: 1758903883000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhBs1mCqk/FKnoPa5R/7YRY/",
//     body: "يرجى العلم انه تم تنفيذ تحويل لحظي بمبلغ 450.00 جم من حسابك المنتهي بـ ****2224 برقم مرجعي 3d43e8bf بتاريخ 16-09-2025 12:31 للمزيد، برجاء الاتصال بـ 19666",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 21,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900282591,
//     date_sent: 1758903882000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhD8fHNu/P1FiIqkU0ySMH//",
//     body: "The transaction on your credit card#7617  from Uber  with EGP 89.57 on 14/09/25  at 18:24 has been refunded. Please try again. Thank you",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 20,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900281853,
//     date_sent: 1758903882000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhAmNy4MBtlMqJUguK4rIAmd",
//     body: "Your credit card ending with#7617 was charged for EGP 89.57 at Uber on 14/09/25  at 18:24. Card available limit is EGP  244657.06. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 19,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900281231,
//     date_sent: 1758903881000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhAL5x1dg6VDOJXH4Vto1z70",
//     body: "Your credit card ending with#7617 was charged for EGP 210.02 at Uber on 14/09/25  at 09:17. Card available limit is EGP  244746.63. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 18,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900280801,
//     date_sent: 1758903880000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhD1asruzzdMi49QiyrgJAS7",
//     body: "يرجى العلم انه تم تنفيذ تحويل لحظي بمبلغ 170.00 جم من حسابك المنتهي بـ ****2224 برقم مرجعي df7e777b بتاريخ 13-09-2025 21:41 للمزيد، برجاء الاتصال بـ 19666",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 17,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900280205,
//     date_sent: 1758903880000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhBjJ4y/MslEJ6m8tnobvSlm",
//     body: "Your credit card ending with#7617 using Apple Pay was charged for EGP 380.00 at Brioche Doree S on 13/09/25  at 21:20. Card available limit is EGP  244956.65. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 16,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900279576,
//     date_sent: 1758903879000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhClVGW1l3dOKo7rMBMDBv4P",
//     body: "Your credit card ending with#7617 was charged for EGP 42.40 at Uber on 13/09/25  at 20:06. Card available limit is EGP  245336.65. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 15,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900278883,
//     date_sent: 1758903878000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhABY+EWT8hKm7nO7eP6Kmue",
//     body: "Your credit card ending with#7617 was charged for EGP 20.34 at Uber on 13/09/25  at 19:32. Card available limit is EGP  245379.05. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 14,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900278223,
//     date_sent: 1758903878000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhByN8OEx/VIRasNVlcPJM3D",
//     body: "Your credit card ending with#7617 was charged for EGP 3597.00 at D S - ALMAZA on 12/09/25  at 19:59. Card available limit is EGP  245399.39. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 13,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900277356,
//     date_sent: 1758903877000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhAxpFNDODxBWZtbDrd9tC1M",
//     body: "يرجى العلم انه تم تنفيذ تحويل لحظي بمبلغ 40.00 جم من حسابك المنتهي بـ ****2224 برقم مرجعي 271712b9 بتاريخ 11-09-2025 01:55 للمزيد، برجاء الاتصال بـ 19666",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 12,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900276650,
//     date_sent: 1758903876000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhDuK5+vItFFmqSXagfB3dXg",
//     body: "يرجى العلم انه تم تنفيذ تحويل لحظي بمبلغ 235.00 جم إلى حسابك المنتهي بـ ****2224 من HESHAM ESSAMELDIN SAEED برقم مرجعي b686f4d3 بتاريخ 11-09-2025 01:31 للمزيد، برجاء الاتصال بـ 19666",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 11,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900276156,
//     date_sent: 1758903876000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhCbOLO/PFtNYYf82m00ikfY",
//     body: "Your credit card ending with#7617 was charged for EGP 28.29 at Uber on 10/09/25  at 22:28. Card available limit is EGP  248996.39. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 10,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900275620,
//     date_sent: 1758903875000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhA/SkH2cQFH76zRWpE2obXL",
//     body: "Your credit card ending with#7617 was charged for EGP 2673.10 at BTECH on 10/09/25  at 21:13. Card available limit is EGP  249024.68. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 9,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900274245,
//     date_sent: 1758903874000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhC+oM/yZtJMNpryM7s1xTiY",
//     body: "يرجى العلم انه تم تنفيذ تحويل لحظي بمبلغ 155.00 جم من حسابك المنتهي بـ ****2224 برقم مرجعي 24e1a032 بتاريخ 10-09-2025 21:11 للمزيد، برجاء الاتصال بـ 19666",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 8,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900273423,
//     date_sent: 1758903874000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhD+Une+bFhFXLiPE+NUUxmL",
//     body: "Your credit card ending with#7617 using Apple Pay was charged for EGP 1286.00 at LC WAIKIKI - SH on 09/09/25  at 21:11. Card available limit is EGP  251697.78. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 7,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900272098,
//     date_sent: 1758903873000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhAUwCLDMQpEMbyCfn7KWyGg",
//     body: "يرجى العلم انه تم تنفيذ تحويل لحظي بمبلغ 170.00 جم إلى حسابك المنتهي بـ ****2224 من NAHED MOHAMED MOSTAFA A برقم مرجعي dee7e647 بتاريخ 09-09-2025 21:09 للمزيد، برجاء الاتصال بـ 19666",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 6,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900271047,
//     date_sent: 1758903873000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhAwLeA3kBRPXL6KYazfiZfw",
//     body: "Your credit card ending with#7617 was charged for EGP 37.71 at Uber on 09/09/25  at 20:28. Card available limit is EGP  252983.78. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 5,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900270295,
//     date_sent: 1758903872000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhB8T0HNbKNDeJ0a46yNDeyW",
//     body: "يرجى العلم انه تم تنفيذ تحويل لحظي بمبلغ 1000.00 جم من حسابك المنتهي بـ ****2224 برقم مرجعي 2b036d5c بتاريخ 08-09-2025 22:41 للمزيد، برجاء الاتصال بـ 19666",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 4,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900269800,
//     date_sent: 1758903871000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhC5/W3IwqBKGJsVgqTby6Uw",
//     body: "Your credit card ending with#7617 using Apple Pay was charged for EGP 250.00 at SECOND CU SECON on 07/09/25  at 18:36. Card available limit is EGP  253023.28. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 3,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900269134,
//     date_sent: 1758903871000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhCMAtEgLt9M9rjuGL0EWp3r",
//     body: "يرجى العلم انه تم تنفيذ تحويل لحظي بمبلغ 100.00 جم إلى حسابك المنتهي بـ ****2224 من حنين صبري على يونس برقم مرجعي 704953fe بتاريخ 07-09-2025 15:37 للمزيد، برجاء الاتصال بـ 19666",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 2,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900268717,
//     date_sent: 1758903870000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhA3x3w8lbJFZpQzma6FRisM",
//     body: "The transaction on your credit card#7617  from Uber  with EGP 1.95 on 07/09/25  at 08:55 has been refunded. Please try again. Thank you",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
//   {
//     _id: 1,
//     thread_id: 11,
//     address: "CIB",
//     date: 1758900267785,
//     date_sent: 1758903870000,
//     protocol: 0,
//     read: 1,
//     status: -1,
//     type: 1,
//     reply_path_present: 0,
//     subject:
//       "proto:CjoKImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1lc3NhZ2luZy4SFCIAKhBRGStaLdhFarNhcmMJjguZ",
//     body: "Your credit card ending with#7617 using Apple Pay was charged for EGP 599.99 at Talabat on 07/09/25  at 13:06. Card available limit is EGP  253271.33. For more details, please visit https://cib.eg/mb",
//     locked: 0,
//     sub_id: 1,
//     error_code: -1,
//     creator: "com.google.android.apps.messaging",
//     seen: 1,
//   },
// ];

// const loading = false;
// const error = { message: "" };

export default function ExpenseTrackerScreen() {
  const [showBankModal, setShowBankModal] = useState(false);
  const { hasBanksSelected, selectedBanks } = useAppSelector(({ banks }) => ({
    hasBanksSelected: banks.selectedBanks.length > 0,
    selectedBanks: banks.selectedBanks,
  }));

  const [messages, loading, error] = useSms({
    delay: 5000,
  });

  // Show bank configuration screen if no banks are selected
  if (!hasBanksSelected) {
    return (
      <View style={styles.container}>
        <View style={styles.bankConfigContainer}>
          <Text style={styles.bankConfigTitle}>Configure Your Banks</Text>
          <Text style={styles.bankConfigSubtitle}>
            Please select your banks to start tracking SMS transactions.
          </Text>

          <TouchableOpacity
            style={styles.configureBtn}
            onPress={() => setShowBankModal(true)}
          >
            <Text style={styles.configureBtnText}>Select Banks</Text>
          </TouchableOpacity>

          {/* <BankSelectionModal
            visible={showBankModal}
            onClose={() => setShowBankModal(false)}
          /> */}
        </View>
      </View>
    );
  }

  return (
    <View style={styles.container}>
      {/* Header */}
      <View style={styles.headerContainer}>
        <Text style={styles.header}>Expense Tracker</Text>
        <TouchableOpacity
          style={styles.settingsBtn}
          onPress={() => setShowBankModal(true)}
        >
          <Text style={styles.settingsBtnText}>⚙️</Text>
        </TouchableOpacity>
      </View>

      {/* Bank Status */}
      <View style={styles.bankStatus}>
        <Text style={styles.bankStatusText}>
          Tracking: {selectedBanks.map((bank) => bank).join(", ")}
        </Text>
      </View>

      {/* Search */}
      <TextInput
        style={styles.searchInput}
        placeholder="Search transactions..."
      />

      {/* Loader / Error handling */}
      {loading && <ActivityIndicator size="large" color="#007AFF" />}
      {/* {error?.message && <Text style={styles.errorText}>⚠️ error</Text>} */}

      {/* Messages */}
      <ScrollView>
        {/* {messages.map((msg) => {
          const parsed = parseSms(msg);
          return (
            <TransactionCard
              key={msg._id}
              merchant={parsed.merchant}
              amount={parsed.amount}
              cardLast4={parsed.cardLast4}
              usedApplePay={parsed.usedApplePay}
              date={parsed.date || new Date(msg.date).toLocaleDateString()}
              time={parsed.time || new Date(msg.date).toLocaleTimeString()}
              availableLimit={parsed.availableLimit}
              transactionType={parsed.transactionType}
              category={parseCategory(msg)}
              categoryColor={parseCategoryColor(msg)}
              link={parsed.link}
              description={msg.body}
            />
          );
        })} */}

        {messages.length === 0 && !loading && (
          <View style={styles.emptyState}>
            <Text style={styles.emptyStateText}>
              No transactions found for selected banks.
            </Text>
          </View>
        )}
      </ScrollView>

      {/* <BankSelectionModal
        visible={showBankModal}
        onClose={() => setShowBankModal(false)}
      /> */}
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: "#f9fafb",
    padding: 16,
  },
  bankConfigContainer: {
    flex: 1,
    justifyContent: "center",
    alignItems: "center",
    paddingHorizontal: 32,
  },
  bankConfigTitle: {
    fontSize: 24,
    fontWeight: "700",
    color: "#1f2937",
    marginBottom: 16,
    textAlign: "center",
  },
  bankConfigSubtitle: {
    fontSize: 16,
    color: "#6b7280",
    textAlign: "center",
    marginBottom: 32,
    lineHeight: 22,
  },
  configureBtn: {
    backgroundColor: "#3b82f6",
    paddingHorizontal: 32,
    paddingVertical: 16,
    borderRadius: 8,
    minWidth: 200,
  },
  configureBtnText: {
    color: "#fff",
    fontSize: 16,
    fontWeight: "600",
    textAlign: "center",
  },
  headerContainer: {
    flexDirection: "row",
    justifyContent: "space-between",
    alignItems: "center",
    marginBottom: 16,
  },
  header: {
    fontSize: 20,
    fontWeight: "700",
    flex: 1,
  },
  settingsBtn: {
    padding: 8,
    borderRadius: 6,
    backgroundColor: "#f3f4f6",
  },
  settingsBtnText: {
    fontSize: 16,
  },
  bankStatus: {
    backgroundColor: "#e0f2fe",
    padding: 12,
    borderRadius: 8,
    marginBottom: 16,
    borderLeftWidth: 4,
    borderLeftColor: "#0284c7",
  },
  bankStatusText: {
    fontSize: 14,
    color: "#0c4a6e",
    fontWeight: "500",
  },
  searchInput: {
    backgroundColor: "#fff",
    padding: 10,
    borderRadius: 8,
    borderWidth: 1,
    borderColor: "#ddd",
    marginBottom: 16,
  },
  errorText: {
    color: "red",
    textAlign: "center",
    marginBottom: 8,
  },
  emptyState: {
    flex: 1,
    justifyContent: "center",
    alignItems: "center",
    paddingVertical: 64,
  },
  emptyStateText: {
    fontSize: 16,
    color: "#6b7280",
    textAlign: "center",
  },
});
